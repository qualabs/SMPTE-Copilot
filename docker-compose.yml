services:
  # Service for ingesting documents
  ingest:
    build: .
    image: rag-poc-v1
    container_name: rag-ingest
    volumes:
      - vector_db:/app/vector_db
      - ./data:/app/data
    environment:
      - PYTHONUNBUFFERED=1
      - VECTOR_DB_PATH=/app/vector_db
      - COLLECTION_NAME=rag_collection
    command: python src/cli/ingest.py --help

  # Service for querying documents
  query:
    build: .
    image: rag-poc-v1
    container_name: rag-query
    volumes:
      - vector_db:/app/vector_db
    environment:
      - PYTHONUNBUFFERED=1
      - VECTOR_DB_PATH=/app/vector_db
      - COLLECTION_NAME=rag_collection
    command: python src/cli/query.py --help

volumes:
  vector_db:
